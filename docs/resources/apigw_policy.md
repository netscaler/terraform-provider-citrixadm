---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "citrixadm_apigw_policy Resource - terraform-provider-citrixadm"
subcategory: ""
description: |-
  Configure API Policies for the provided API Deployment Id
---

# citrixadm_apigw_policy (Resource)

Configure API Policies for the provided API Deployment Id

## Example Usage

```terraform
data "citrixadm_apigw_deployment" "demo" {
  name = "tf_deploy"
}
data "citrixadm_apigw_upstream_service" "upstreamdemo" {
  name          = "sdf"
  deployment_id = data.citrixadm_apigw_deployment.demo.id
}

resource "citrixadm_apigw_policy" "policy" {

  policygroup_name = "tf_policy"
  requestpath {
    order_index = 1
    policy_name = "policyName"
    policytype  = "NoAuth"
    config_spec {
      api_resource_paths {
        delete = false
        endpoints = [
          "/user"
        ]
        get   = true
        patch = false
        post  = true
        put   = false
      }
      custom_rules {
        delete = false
        endpoints = [
          "/user/action"
        ]
        get   = false
        patch = false
        post  = false
        put   = false
      }
    }
  }

  upstreamservice_id = data.citrixadm_apigw_upstream_service.upstreamdemo.id
  deployment_id      = data.citrixadm_apigw_deployment.demo.id
  deploy             = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `deploy` (Boolean)
- `deployment_id` (String) Deployment Id
- `policygroup_name` (String) API Policy Group Name
- `requestpath` (Block List, Min: 1) List of API Policy with corresponding JSON configuration to be applied on Request Path (see [below for nested schema](#nestedblock--requestpath))
- `upstreamservice_id` (String) Upstream Service Id in the API Deployment

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--requestpath"></a>
### Nested Schema for `requestpath`

Required:

- `order_index` (Number) Order in which to apply API Policy
- `policy_name` (String) API Policy name
- `policytype` (String) Type for API Policy

Optional:

- `config_spec` (Block List, Max: 1) JSON dictionary of configuration parameters and values as required for the selected API Policy type. Please refer to the document for details on config_spec JSON schema for different API policy type (see [below for nested schema](#nestedblock--requestpath--config_spec))

<a id="nestedblock--requestpath--config_spec"></a>
### Nested Schema for `requestpath.config_spec`

Optional:

- `api_resource_paths` (Block List, Max: 1) API resource and its methods for which you want to apply a policy (see [below for nested schema](#nestedblock--requestpath--config_spec--api_resource_paths))
- `custom_rules` (Block List, Max: 1) Custom path prefixes and multiple methods (see [below for nested schema](#nestedblock--requestpath--config_spec--custom_rules))

<a id="nestedblock--requestpath--config_spec--api_resource_paths"></a>
### Nested Schema for `requestpath.config_spec.api_resource_paths`

Optional:

- `delete` (Boolean) DELETE Method
- `endpoints` (List of String) API Path
- `get` (Boolean) GET Method
- `patch` (Boolean) PATCH Method
- `post` (Boolean) POST Method
- `put` (Boolean) PUT Method


<a id="nestedblock--requestpath--config_spec--custom_rules"></a>
### Nested Schema for `requestpath.config_spec.custom_rules`

Optional:

- `delete` (Boolean) DELETE Method
- `endpoints` (List of String) API Path
- `get` (Boolean) GET Method
- `patch` (Boolean) PATCH Method
- `post` (Boolean) POST Method
- `put` (Boolean) PUT Method


